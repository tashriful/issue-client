<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      lang="en"
      layout:decorator="fragments/layout">
<head>
    <script th:src="@{/js/sysBase/sysBaseOthers.js}"></script>
    <link th:insert="Procurment/PO/PoScriptLink"/>
    <!--<link-->
            <!--href="https://cdnjs.cloudflare.com/ajax/libs/easy-autocomplete/1.3.5/easy-autocomplete.min.css"-->
            <!--rel="stylesheet" type="text/css"/>-->
    <!--<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>-->
    <!--<script-->
            <!--src="https://cdnjs.cloudflare.com/ajax/libs/easy-autocomplete/1.3.5/jquery.easy-autocomplete.min.js"-->
            <!--type="text/javascript"></script>-->
    <!--<link th:href="@{/css/easyAutocomplete/easy-autocomplete.min.css}" rel="stylesheet"/>-->

    <!--<script th:src="@{/js/easyAutocomplete/autocomplete.js}"></script>-->
    <!--<script th:src="@{/js/easyAutocomplete/jquery.easy-autocomplete.min.js}"></script>-->
    <script th:inline="javascript">



        function getPrinterLists()
        {
            getPrinterList();
        }
        function selectedobj(value, ind) {
            if (ind == 'poSup') {
//                alert('selectedobj');
                SearchSupObj(value);
            }
        }
        ;


        function getPoSupInf(pSup, pdisplay, pindc) {
//            alert('11');

//                                                alert('getLocator');
            var varOrg = document.getElementById('inputorgHierarchy').value;

            var displayfieldfrom = pdisplay;
            var indc = pindc;
            AutocomFunc('/AYE/ACRC/SearchOrgSupplier/' + varOrg + '/' + pSup,
                    displayfieldfrom,
                    'name',
                    null,
                    indc);
        }
        ;

        function AutocomFunc(purlval, pdisplayfield, pgetvalue, pgetDesc, pindc) {
//            alert(purlval);
//            alert(pdisplayfield);
//            alert(pgetvalue);
//            alert(pgetDesc);
//            alert(pindc);

            var urlval = purlval;//'/AYE/ACRC/SearchCodeComb/' + bSeg;
            var displayfield = pdisplayfield;//'#toAccountV';
            var getvalue = pgetvalue;//'concatedSegment';
            var getDesc = pgetDesc;//'siteAddress';
            var indc = pindc;//'segment2desc';

            autocomwithobject(urlval, getvalue, displayfield, null, getDesc, indc);

        }
        ;

        function setPostPoBtn()
        {var pLidC = 0;var cLineId;$('#countId').each(function () {pLidC=pLidC+1;});
            if (pLidC==0) { $('#btpost').prop('disabled',true); }else { $('#btpost').prop('disabled',false); }
        };

        var amtdr;
        var totPoAmt;
        function totAmountPoH() {
            var sumdr = 0;
            amtdr = 0;
            totPoAmt=0;
            var amt;
            $('.amt').each(function () {
                document.getElementById('amtId').val
                //amt = isNaN(parseFloat(this.value))
                amtdr = parseFloat(this.value);
                if (isNaN(parseFloat(amtdr)))
                {
                    amtdr=0;
                }
                sumdr=sumdr+amtdr;

                totPoAmt =sumdr;

            });
            totPoAmt = sumdr.toFixed(2);
//            alert(totDr);
            $('.total-combatdr').html('<b>'+totPoAmt+'</b>');

        };

    </script>
</head>

<body>
<div class="right_col" role="main" data-layout-fragment="content">
    <div class="row">
        <div class="col-sm-9 col-sm-offset-2">
            <!--<div class="container">-->
            <div class="panel panel-default">

                <div class="form-group col-sm-12  jepg_cust_head">
                    <div class="form-group col-sm-9 " style="padding-left: 0; color: #172D44">PO Entry - <b th:text="${poHeader.inventoryInformations.name}"></b></div>
                    <div th:if="${poHeader.poStatus!=T(com.aye.web.model.PoStatus).N}"
                         class="form-group col-sm-3 text-right Padding10px" style=" font-size: 12px;" align="right">
                        <form th:action="@{'/Report/staticReport/'+${mode}+'/'+${pageId}+'/'+${temltId}}"
                              th:method="post" th:target="_blank">
                            <button type="button" data-toggle="modal" data-target="#modal-printer" th:id="btnIdPM"
                                    th:attr="data-target='#modal-printer'"  title="Print" >
                                <span class="glyphicon glyphicon-record"></span>
                            </button>

                            <script th:inline="javascript">
                                $(document).ready(function(){
                                    lParam = 'purchaseOrder :'+[[${poHeader.id}]];
                                    ltmpId = [[${temltId}]];

                                });
                                document.getElementById('btnIdPM').onclick = function()
                                {
                                    getPrinterList();
                                };

                            </script>


                            <button  target="_blank" type="submit" name="rpt" th:value="'purchaseOrder :'+${poHeader.id}" class="btn btn-primary" align="center">
                                <span class="glyphicon glyphicon-print"></span> Print
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Default panel contents -->
                <!--<div class="panel-heading">PO Entry</div>-->
                <div class="panel-body">
                    <form th:action="@{'/procurment/poHeader/'+${mode}+'/'+${pageId}+'/'+${temltId}+'/'+${invOrgId}}"
                          th:object="${poHeader}"
                          th:method="post">
                        <!--+${role.role}  +${role.role}-->


                        <span style="font-weight: bold" th:each="m :${msg}">
                            <p th:style="${m.tag} ? 'color:#ed1c24;':'color:#4aa509;'">
                                <span th:if="${m.tag==null}" th:text="${m.msg}"> </span>
                                <span th:unless="${m.tag==null}" th:text="${m.tag+' '+m.msg}"></span>
                            </p>
                        </span>

                        <div class="form-group">
                            <!--<label for="inputid">Name</label>-->
                            <input type="hidden" class="form-control" id="inputid" placeholder="Id" th:field="*{id}"
                                   name="id"/>
                            <!--<input type="text" class="form-control" id="inputinvtrnsName" placeholder="Inv Trns Name" th:field="*{transactionName}" name="transactionName"/>-->
                            <span class="help-block" th:if="${#fields.hasErrors('id')}"
                                  th:errors="*{id}">Id Error</span>
                        </div>


                        <div th:class="${#fields.hasErrors('poTrnsType')} ? 'form-group has-error' :'form-group required col-sm-12 ' ">
                            <label class="col-sm-3 control-label " for="inputpoNumber">Type</label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-6 " id="inputpoTrnsTypeLoc">
                                <input type="text"  class="form-control" id="inputpoTrnsType2nd"  th:field="*{poTrnsType.name}" th:value="*{poTrnsType}" readonly/>
                            </div>
                            <div class="col-sm-6 " id="inputpoTrnsTypeEnt">
                                <select id="inputpoTrnsType"
                                        name="poTrnsType" th:field="*{poTrnsType}" class="form-control" required>
                                    <div th:if="${#lists.size(poTrnsTypes) &gt; 0 }">
                                        <option value=""> Select</option>
                                    </div>
                                    <option th:each="t :${poTrnsTypes}"
                                            th:text="${t.name}"
                                            th:value="${t.id}"></option>
                                </select>
                                <p th:errors="*{poTrnsType}" class="help-block"></p>
                            </div>
                            <div class="col-sm-2 ">
                                <input type="text" id="inputvresion" placeholder="Version"
                                       name="vresion" th:field="*{vresion}" class="form-control" readonly="readonly"/>

                                <p th:errors="*{poNumber}" class="help-block"></p>
                                <script th:inline="javascript">
                                    var lSize= [[${#lists.size(poHeader.poLines)}]];
                                    var lpId = [[${poHeader.id}]];
                                    if(lSize>0&&lpId!=null)
                                    {
                                        document.getElementById('inputpoTrnsTypeEnt').style.display = 'none';
                                        document.getElementById('inputpoTrnsTypeLoc').style.display = 'block';
//                                        $('#inputpoTrnsType').attr('disabled', 'disabled');
                                    }else
                                    {
                                        document.getElementById('inputpoTrnsTypeEnt').style.display = 'block';
                                        document.getElementById('inputpoTrnsTypeLoc').style.display = 'none';

                                    }

                                </script>
                            </div>
                        </div>

                         <div th:class="${#fields.hasErrors('poNumber')} ? 'form-group has-error' :'form-group required col-sm-12 ' ">
                            <label class="col-sm-3 control-label " for="inputpoNumber">Po Number & Date</label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-4 ">
                                <input type="text" id="inputpoNumber" placeholder="Po Number"
                                       name="poNumber" th:field="*{poNumber}" class="form-control" readonly="readonly"/>

                                <p th:errors="*{poNumber}" class="help-block"></p>
                            </div>

                             <div class="col-sm-4 ">
                                 <input type="date" id="inputpoDate" placeholder="poDate"
                                        name="poDate" th:field="*{poDate}" class="form-control"/>
                                <p th:errors="*{poNumber}" class="help-block"></p>
                            </div>
                        </div>

                        <div >
                            <input type="hidden" id="inputorgHierarchy" placeholder="orgHierarchy"
                                   name="orgHierarchy" th:field="*{orgHierarchy}" class="form-control"/>
                            <input type="hidden" id="inputinventoryInformations" placeholder="inventoryInformations"
                                   name="inventoryInformations" th:field="*{inventoryInformations}" class="form-control"/>
                        </div>



                        <div th:class="${#fields.hasErrors('supplierName')} ? 'form-group has-error' :'form-group required col-sm-12 ' ">
                            <label class="col-sm-3 control-label " for="inputsupplierName">Supplier Name</label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-8 ">

                                <input type="text" class="form-control" id="inputsupplierName"
                                       placeholder="Supplier Name"
                                       th:field="*{supplierName}" name="supplierName" th:required="required"/>
                            <span class="help-block" th:if="${#fields.hasErrors('supplierName')}"
                                  th:errors="*{supplierName}">PO number Error</span>
                                <input type="hidden" id="inputsupplierLine" placeholder="supplierLine"
                                       name="supplierLine" th:field="*{supplierLine}" class="form-control"/>

                                <p th:errors="*{supplierLine}" class="help-block"></p>
                                <script th:inline="javascript">

                                    function SearchSupObj(objparms) {
//                                            alert('x');
                                        var objparmV = objparms;
                                        $('#inputsupplierLine').val(objparmV.id).trigger("change");
                                        $('#inputsupplierAddress').val(objparmV.siteAddress).trigger("change");
                                    };
                                    document.getElementById('inputsupplierName').oninput = function () {
                                        myFunction();
                                    };
                                    function myFunction() {
                                        var innerVar = document.getElementById('inputsupplierName').value;
                                        if (innerVar.length > 2) {

                                            var displayfieldfrom = [['#inputsupplierName']];

                                            getPoSupInf(innerVar, displayfieldfrom, 'poSup');
//                                        document.getElementById('fromLocator').focus();
                                            document.getElementById('inputsupplierName').focus();
                                        }
                                    }




                                </script>
                            </div>
                        </div>


                        <div th:class="${#fields.hasErrors('supplierAddress')} ? 'form-group has-error' :'form-group required col-sm-12 ' ">
                            <label class="col-sm-3 control-label " for="inputsupplierAddress">Supplier Address</label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-8 ">
                                <input type="text" id="inputsupplierAddress" placeholder="supplierLine"
                                       name="supplierAddress" th:field="*{supplierAddress}" class="form-control"
                                       readonly="readonly"/>

                                <p th:errors="*{supplierAddress}" class="help-block"></p>
                            </div>
                        </div>


                        <div th:class="${#fields.hasErrors('currency')} ? 'form-group has-error' :'form-group required col-sm-12 ' ">
                            <label class="col-sm-3 control-label " for="inputcurrency">Currency</label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-8 " id="inputcurrencyLoc">
                                <input type="text"  class="form-control" id="inputcurrency2nd"  th:field="*{currency.code}" th:value="*{currency}" readonly/>
                            </div>
                            <div class="col-sm-8 " id="inputcurrencyEnt">
                                <select class="form-control" id="inputcurrency" placeholder="currency"
                                        th:field="*{currency}" name="currency" >
                                    <!--<option value="">Select one</option>-->
                                    <option th:each="cur :${currency}"
                                            th:text="${cur.code}"
                                            th:value="${cur.id}"
                                            th:attr="data-defExec=${cur.defaultExcgangeRate}"></option>
                                </select>
                                <input type="hidden" id="inputcurrencyCode" th:field="*{currencyCode}"/>

                                <script th:inline="javascript">
                                    var ldefCur = [[${defCurr}]];


                                    $("#inputcurrency").change(function () {
                                        var locCurVal = ldefCur.code;

                                        var varDefexecRate = ($(this.options[this.selectedIndex]).attr('data-defExec'));
                                        var varSelectdexec = ($(this.options[this.selectedIndex]).text());
                                        document.getElementById('inputcurrencyCode').value = varSelectdexec;
                                        document.getElementById('inputcurrencyLoc').value = varSelectdexec;
                                        document.getElementById('inputexchRate').value = varDefexecRate;
                                        document.getElementById('inputcurrency2nd').value= varSelectdexec;
                                        if (varSelectdexec == locCurVal) {
                                            document.getElementById('inputexchRateDiv').style.display = 'none';
//                                            document.getElementById('inputexchdateDiv').style.display = 'none';
                                        } else {
                                            document.getElementById('inputexchRateDiv').style.display = 'block';
//                                            document.getElementById('inputexchdateDiv').style.display = 'block';
                                        }
                                    });




                                </script>
                            </div>
                        </div>


                        <div id="inputexchRateDiv"
                             th:class="${#fields.hasErrors('exchRate')} ? 'form-group has-error' :'form-group required col-sm-12 ' ">
                            <label class="col-sm-3 control-label"> Exch Rate & Date </label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-4 ">
                                <input type="text" id="inputexchRate" placeholder="exchRate"
                                       name="exchRate" th:field="*{exchRate}" class="form-control" />
                                <!--th:readonly="${#lists.size(poHeader.poLines) &gt; 0 }"-->
                                <p th:errors="*{exchRate}" class="help-block"></p>

                                <script th:inline="javascript">
                                    $(document).ready(function () {
                                        var localExec = document.getElementById('inputcurrency').value;

                                        var localExecSel = document.getElementById('inputcurrency');
                                        var localExecSelVal =localExecSel.options[localExecSel.selectedIndex].text;
                                        document.getElementById('inputcurrency2nd').value= localExecSelVal;
                                        var locCurIdVal = ldefCur.id;
                                        var locCusrRate = ldefCur.defaultExcgangeRate;

//
                                        var lSize =[[${#lists.size(poHeader.poLines)}]];
                                        var lId =[[${poHeader.id}]];
//
//                                        alert(lId);
                                        if (lSize>0 && lId!=null)
                                        {
                                           document.getElementById('inputcurrencyLoc').style.display='block' ;
                                           document.getElementById('inputcurrencyEnt').style.display='none' ;
                                        }else
                                        {
                                            document.getElementById('inputcurrencyLoc').style.display='none' ;
                                            document.getElementById('inputcurrencyEnt').style.display='block' ;
                                        }

                                        if (localExec == locCurIdVal) {
//                                            alert('Y'+' '+localExec+' '+locCurIdVal);

                                            document.getElementById('inputexchRateDiv').style.display = 'none';
//                                            document.getElementById('inputexchdateDiv').style.display = 'none';
                                            document.getElementById('inputcurrency2nd').value= localExecSelVal;
                                            document.getElementById('inputexchRate').value = locCusrRate;
                                        } else {
//                                            alert('N');
                                            document.getElementById('inputexchRateDiv').style.display = 'block';
//                                            document.getElementById('inputexchdateDiv').style.display = 'block';
                                        }
                                    })

                                </script>



                            </div>
                            <!--<div class="col-sm-2 ">-->
                                <!--<input type="text" id="inputexchAmt" class="form-control" readonly />-->
                                <!--</div>-->
                            <div class="col-sm-4 ">
                                <input type="date" id="inputexchDate" placeholder="exchDate"
                                       name="exchRate" th:field="*{exchDate}" class="form-control" />
                                <!--th:readonly="${#lists.size(poHeader.poLines) &gt; 0 }"-->
                                <script th:inline="javascript">
                                    var trns = [[*{poNumber}]];
                                    var ldefCur2 = [[${defCurr}]];
                                    if (trns != null) {
                                        var varLCurCode = document.getElementById('inputcurrencyCode').value;
                                        if (varLCurCode == ldefCur2) {
                                            document.getElementById('inputexchRateDiv').style.display = 'none';
//                                            document.getElementById('inputexchdateDiv').style.display = 'none';
                                        } else {
                                            document.getElementById('inputexchRateDiv').style.display = 'block';
//                                            document.getElementById('inputexchdateDiv').style.display = 'block';
                                        }


                                    }

                                </script>

                                <p th:errors="*{exchDate}" class="help-block"></p>

                            </div>
                        </div>

                        <div class="col-sm-12">

                            <div class="col-sm-4 " align="center"></div>
                            <div class="col-sm-4 " align="center">Amount</div>
                            <div class="col-sm-4 " align="center">Orgin Amount</div>
                        </div>



                        <div th:class="${#fields.hasErrors('totalAmount')} ? 'form-group has-error' :'form-group required col-sm-12 ' ">

                            <label class="col-sm-3 control-label " for="inputtotalAmount">Total Amount</label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-4 ">
                                <input type="text" id="inputtotalAmount" placeholder="totalAmount"
                                       name="totalAmount" th:field="*{totalAmount}" class="form-control"
                                       readonly="readonly"/>

                                <p th:errors="*{totalAmount}" class="help-block"></p>
                                <script th:inline="javascript">
                                    $(document).ready(function(){
                                        var lExecRate= document.getElementById('inputexchRate').value;
                                        var ltotAmt= document.getElementById('inputtotalAmount').value;

                                    })
                                    $('#inputexchRate').on('input',function(){
                                        var lExecRate= document.getElementById('inputexchRate').value;
                                        var ltotAmt= document.getElementById('inputtotalAmount').value;
                                    })
                                </script>

                            </div>
                            <div class="col-sm-4 ">
                                <input type="text" id="inputtotalBaseAmount" placeholder="Total BaseAmount"
                                       name="totalBaseAmount" th:field="*{totalBaseAmount}" class="form-control"
                                       readonly="readonly"/>
                                </div>
                        </div>

                        <div th:class="${#fields.hasErrors('rcvPerson')} ? 'form-group has-error' :'form-group col-sm-12 ' ">
                            <label class="col-sm-3 control-label " for="inputnote">Contact Person</label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-8 ">
                                <input type="text" id="inputrcvPerson" placeholder="Contact Persion"
                                       name="rcvPerson" th:field="*{rcvPerson}" class="form-control"/>

                                <p th:errors="*{rcvPerson}" class="help-block"></p>
                            </div>
                        </div>
                        <div th:class="${#fields.hasErrors('transportCost')} ? 'form-group has-error' :'form-group col-sm-12 ' ">
                            <label class="col-sm-3 control-label " for="inputnote">Transport</label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-3 ">
                                <select id="inputtransportCost" placeholder="transportCost"
                                       name="transportCost" th:field="*{transportCost}" class="form-control" >
                                    <option value="">Select</option>
                                    <option th:value="Included" th:text="Included"></option>
                                    <option th:value="Excluded" th:text="Excluded"></option>

                                </select>

                                <p th:errors="*{transportCost}" class="help-block"></p>
                            </div>
                            <label class="col-sm-2 control-label " for="inputnote">VAT & AIT</label>

                            <!--<div class="col-sm-1 "><b>:</b></div>-->
                            <div class="col-sm-3 ">
                                <select id="inputvatNait" placeholder="vatNait"
                                        name="vatNait" th:field="*{vatNait}" class="form-control">
                                    <option value="">Select</option>
                                    <option th:value="Included" th:text="Included"></option>
                                    <option th:value="Excluded" th:text="Excluded"></option>

                                </select>

                                <p th:errors="*{vatNait}" class="help-block"></p>
                            </div>

                        </div>
                  <div th:class="${#fields.hasErrors('note')} ? 'form-group has-error' :'form-group required col-sm-12 ' ">
                            <label class="col-sm-3 control-label " for="inputnote">Notes</label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-8 ">
                                <input type="text" id="inputnote" placeholder="note"
                                       name="Status" th:field="*{note}" class="form-control"/>

                                <p th:errors="*{note}" class="help-block"></p>
                            </div>
                        </div>


                        <div th:class="${#fields.hasErrors('poStatus')} ? 'form-group has-error' :'form-group required col-sm-12 ' ">
                            <label class="col-sm-3 control-label " for="inputpoStatus">Status</label>

                            <div class="col-sm-1 "><b>:</b></div>
                            <div class="col-sm-8 ">
                                <input type="hidden" id="inputpoStatus" placeholder="Status"
                                       name="Status" th:field="*{poStatus}" class="form-control" readonly="readonly"/>
                                <input type="text" id="inputpoStatus" placeholder="Status"
                                       name="Status" th:field="*{poStatus.displayName}" class="form-control" th:value="*{poStatus}" readonly="readonly"/>

                                <p th:errors="*{poStatus}" class="help-block"></p>
                            </div>
                        </div>


                        <div class="form-group">

                            <input type="hidden" class="form-control" id="inputfromReq"
                                   th:field="*{fromReq}" name="fromReq"/>

                            <input type="hidden" class="form-control" id="inputcolumncreatedBy"
                                   placeholder="columncreatedBy"
                                   th:field="*{commonColumn.createdBy}" name="columncreatedBy"/>
                            <input type="hidden" class="form-control" id="inputcolumnDate" placeholder="columnDate"
                                   th:field="*{commonColumn.creationDate}" name="columnDate"/>
                            <span class="help-block" th:if="${#fields.hasErrors('commonColumn.creationDate')}"
                                  th:errors="*{commonColumn.creationDate}">User Name Error</span>
                        </div>



                        <div>
                            <button type="button" data-toggle="modal" data-target="#modal-RecordHistory" th:id="btnIdHM"
                                    th:attr="data-target='#modal-RecordHistory'"  title="Record History" >
                                <span class="glyphicon glyphicon-record"></span>
                            </button>
                            <script th:inline="javascript">
                                document.getElementById('btnIdHM').onclick =
                                        function () {
                                            var obj = [[${poHeader.commonColumn}]];

                                            histabledataset(obj);
                                        };

                            </script>

                        </div>
                        <div data-th-replace="fragments/recordHistoryModal :: recordhis-modal"></div>
                        <div data-th-replace="fragments/printModal :: printer-modal"></div>


                        <div class="text-right Padding10px ">

                            <span th:if="${poHeader.id != null and poHeader.poStatus== T(com.aye.web.model.PoStatus).N}" >
                                <a th:href="@{/procurment/poConditions/E/}+${pageId}+'/'+${temltId}+'/'+${invOrgId}+'/'+${poHeader.id}"
                                   class="btn btn-success">Additional Info</a>
                            </span>

                            <a th:href="@{/procurment/requsition/E/}+${pageId}+'/'+${temltId}+'/'+${invOrgId}"
                               class="btn btn-primary">Requsitions</a>
                            <a th:href="@{/procurment/poHeader/E/}+${pageId}+'/'+${temltId}+'/'+${invOrgId}"
                               class="btn btn-default">New</a>
                            <!--and poHeader.poStatus== T(com.aye.web.model.PoStatus).N -->
                            <span th:if="${poHeader.id != null and poHeader.poStatus!= T(com.aye.web.model.PoStatus).PA} and ${rcvCount== 0}" >
                            <a th:href="@{/procurment/poLines/E/}+${pageId}+'/'+${temltId}+'/'+${invOrgId}+'/'+${poHeader.id}"
                               class="btn btn-default">Line</a>
                            </span>
                            <span th:if="*{#lists.size(poLines)==0} and *{#lists.size(poConditionses)==0} and ${poHeader.id != null}" >
                                <a th:href="@{/procurment/poHeaderDelete/E/}+${pageId}+'/'+${temltId}+'/'+${invOrgId}+'/'+${poHeader.id}"
                               class="btn btn-danger">Delete</a>
                            </span>

                            <a th:href="@{/procurment/search/E/}+${pageId}+'/'+${temltId}+'/'+${invOrgId}"
                               class="btn btn-default">Search</a>

                            <span th:if ="${rcvCount== 0 and poHeader.poStatus!= T(com.aye.web.model.PoStatus).PA} and ${ADD}">
                                <button type="submit" name="save" class="btn btn-primary" onclick="return checkemptyfieldPoHeader()">Save</button>
                            </span>
                            <!--#lists.size(poHeader.poLines) &gt; 0 and -->
                            <span th:if ="${poHeader.id!= null } and ${poHeader.poStatus== T(com.aye.web.model.PoStatus).N } and ${POST} and  ${!enableAppHierarchy} ">
                                <button type="submit" name="post" id="btpost" class="btn btn-primary">Post</button>
                            </span>


                            <span th:if ="${poHeader.id!= null } and ${poHeader.poStatus== T(com.aye.web.model.PoStatus).N} and ${poHeader.id != null} and ${enableAppHierarchy} ">
                                <button type="button" data-toggle="modal" data-target="#modal-approval" th:id="btnMdl"
                                        th:attr="data-target='#modal-approval'"  title="Post" class="btn btn-primary">Post
                                    <span ></span>
                                </button>
                            </span>



                        </div>


                    <div class="marginbtm10px">
                        <div class="col-sm-12 brder accgl-col">
                            <div class="col-sm-1 accgl-col brderright" style="width: 20px">SL</div>
                            <div class="col-sm-3 accgl-col brderright" align="center">Item</div>
                            <div class="col-sm-1 accgl-col brderright" align="center">Quantity</div>
                            <div class="col-sm-2 accgl-col brderright " align="center">Unit Price</div>
                            <div class="col-sm-2 accgl-col brderright" align="center">Amount</div>
                            <div class="col-sm-2 accgl-col brderright" align="center">SubInventory</div>
                            <div class="col-sm-1 accgl-col brderrigh" align="center">Action</div>
                        </div>

                        <div class="col-sm-12 accgl-col brder "
                             th:each="lines,rowStat : *{poLines}">
                            <div class="col-sm-1  form-group accgl-col high_control top_marg brderright" id="countId"
                                 th:text="${rowStat.count}" style="width: 20px; ">1

                            </div>


                            <div class="col-sm-3 form-group accgl-col top_marg brderright">
                                <input th:type="hidden"  th:field="*{poLines[__${rowStat.index}__].id}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].poHeader}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].masterItem.id.id}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].masterItem.id.inventoryInformations}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].primUom}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].uomCode}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].primaryQty}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].trnsUom}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].trnsUomCode}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].conversionRate}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].exchRate}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].orgHierarchy}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].poReqHeader}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].poReqLines}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].subinventory}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].subinvLocator}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].poQuotationHeader}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].poQuotationLine}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].poQuotationDetail}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].commonColumn.createdBy}" />
                                <input th:type="hidden" th:field="*{poLines[__${rowStat.index}__].commonColumn.creationDate}" />
                                <input class="td form-control " th:type="text"
                                       th:field="*{poLines[__${rowStat.index}__].itemCode}"
                                       height="2" readonly="readonly"/>
                            </div>

                            <div class="col-sm-1 form-group accgl-col top_marg brderright">
                                <input class="td form-control " th:type="text" style="text-align: end"
                                       th:field="*{poLines[__${rowStat.index}__].trnsQty}"
                                       height="2" readonly="readonly"/>
                            </div>

                            <div class="col-sm-2 form-group accgl-col top_marg brderright">
                                <input class="td form-control " th:type="text" style="text-align: end"
                                       th:field="*{poLines[__${rowStat.index}__].unitPrice}"
                                       height="2" readonly="readonly"/>
                            </div>
                            <div class="col-sm-2 form-group accgl-col top_marg brderright">
                                <input class="td form-control " th:type="hidden" style="text-align: end"
                                       th:field="*{poLines[__${rowStat.index}__].amount}"
                                       height="2" />

                                <input class="td form-control amt" th:type="text" style="text-align: end"
                                       th:field="*{poLines[__${rowStat.index}__].baseAmount}" id="amtId"
                                       height="2" readonly="readonly"/>
                            </div>
                            <div class="col-sm-2 form-group accgl-col top_marg brderright">
                                <input class="td form-control " th:type="text"
                                       th:field="*{poLines[__${rowStat.index}__].subInvCode}"
                                       height="2" readonly="readonly"/>
                            </div>

                            <div class="col-sm-1 form-group accgl-col top_marg " align="center" >
                                <!--<div th:if="${poHeader.poStatus== T(com.aye.web.model.PoStatus).N }" class="btn-group" role="group" aria-label="..." style="margin-top: 2px">-->
                                <div th:if ="${rcvCount== 0 and poHeader.id != null and poHeader.poStatus!= T(com.aye.web.model.PoStatus).PA}" class="btn-group" role="group" aria-label="..." style="margin-top: 2px">
                                    <a th:href="@{/procurment/poLinesEdit/U/}+${pageId}+'/'+${temltId}+'/'+${invOrgId}+'/'
                                    +*{poLines[__${rowStat.index}__].poHeader.id} +'/'
                                    +*{poLines[__${rowStat.index}__].id}"
                                       class="btn btn-success"><span
                                            class="glyphicon glyphicon-edit" aria-hidden="true"></span></a>

                                </div>
                            </div>

                        </div>
                        <div class="col-sm-12 accgl-col brder ">
                            <div class="col-sm-1 accgl-col " style="width: 20px"></div>
                            <div class="col-sm-6 accgl-col brderright"><b>Total</b></div>
                            <div class="col-sm-2 accgl-col brderright total-combatdr" style="padding-left: 10px !important;text-align: end"></div>
                            <div class="col-sm-2 accgl-col brderright " style="padding-left: 10px !important;"></div>

                        </div>
                        <script>
                            $(document).ready(function(){

                                setPostPoBtn();
                                totAmountPoH();
                            })
                        </script>

                        </div>
                        <div class="panel-footer">
                        </div>


                </form>
                    <span th:if="${enableAppHierarchy}">
                    <div data-th-replace="fragments/ApprovalModal :: approval-modal"></div>
                        </span>
                    <!--</div>-->
                </div>
            </div>
        </div>
    </div>
    </div>
        <!--/*/ <th:block th:include="fragments/js :: body"></th:block> /*/-->
        <script src="../static/js/app.js" th:src="@{/js/app.js}"></script>
</body>



</html>
